
#app settings
cd `dirname "$0"`/..
WEB_APP_ROOT=`pwd`

APP_OPTIONS="$APP_OPTIONS -Dwebapp=$WEB_APP_ROOT/webapp -DcontextPath=/ -Dport=8888"
#jetty http threadPool
APP_OPTIONS="$APP_OPTIONS -DcorePoolSize=20 -DmaxPoolSize=50 -DpoolQueueSize=200"
#jetty nio connector
APP_OPTIONS="$APP_OPTIONS -DmaxIdleTime=10000 -DlowResourcesMaxIdleTime=3000 -DacceptQueueSize=100"
APP_OPTIONS="$APP_OPTIONS -DenableAccessLog=true -DaccessLogPath=$APP_OUTPUT_PATH"
APP_OPTIONS="$APP_OPTIONS -DenableMonitor=false -DmonitorInterval=60"
APP_OPTIONS="$APP_OPTIONS -Dtoolkit.packet.max=40971520"
APP_OPTIONS="$APP_OPTIONS -Djava.io.tmpdir=$WEB_APP_ROOT"
APP_OPTIONS="$APP_OPTIONS -Dorg.eclipse.jetty.server.Request.maxFormContentSize=-1"

#APP_ARGS="args0 "

#java opts
JVM_OPTIONS="-server -Xms512m -Xmx512m -Xmn380m -XX:PermSize=128m -Djava.awt.headless=true"
JVM_OPTIONS="$JVM_OPTIONS -XX:+UseParallelGC -XX:+UseParallelOldGC -XX:ParallelGCThreads=5"
JVM_OPTIONS="$JVM_OPTIONS -XX:SurvivorRatio=8 -XX:+UseAdaptiveSizePolicy "
JVM_OPTIONS="$JVM_OPTIONS -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:$APP_OUTPUT_PATH/gc.log"

JVM_OPTIONS="$JVM_OPTIONS -Dfile.encoding=utf-8 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=$APP_OUTPUT_PATH"
JVM_OPTIONS="$JVM_OPTIONS -Dsun.net.client.defaultConnectTimeout=10000 -Dsun.net.client.defaultReadTimeout=30000"

#debug opts
#JVM_OPTIONS="$JVM_OPTIONS -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1879"

#HOST_ADDR=`hostname -i`
#JVM_OPTIONS="$JVM_OPTIONS -Dcom.sun.management.jmxremote.port=1091 -Dcom.sun.management.jmxremote.ssl=false"
#JVM_OPTIONS="$JVM_OPTIONS -Dcom.sun.management.jmxremote.authenticate=false -Djava.rmi.server.hostname=$HOST_ADDR"

